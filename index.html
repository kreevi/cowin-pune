<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="https://kreevi.github.io/cowin-pune/favicon.png">
    <!-- Primary Meta Tags -->
    <title>Pune | Vaccine Slots Notifier</title>
    <meta name="title" content="Pune | Vaccine Slots Notifier">
    <meta name="description" content="Use this tool to find vaccine slots in Pune. The app uses Cowin API to get instant vaccine slot results as they open.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kreevi.github.io/cowin-pune/">
    <meta property="og:title" content="Pune | Vaccine Slots Notifier">
    <meta property="og:description" content="Use this tool to find vaccine slots in Pune. The app uses Cowin API to get instant vaccine slot results as they open.">
    <meta property="og:image" content="https://kreevi.github.io/cowin-pune/kreevi-logo-meta-tags.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://kreevi.github.io/cowin-pune/">
    <meta property="twitter:title" content="Pune | Vaccine Slots Notifier">
    <meta property="twitter:description" content="Use this tool to find vaccine slots in Pune. The app uses Cowin API to get instant vaccine slot results as they open.">
    <meta property="twitter:image" content="https://kreevi.github.io/cowin-pune/kreevi-logo-meta-tags.png">
    <meta name="robots" content= "index, follow">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-E25WJXQ935"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-E25WJXQ935');
    </script>
</head>

<body>
    <header id="top">
        <div id="minAge18">
            <p>Min Age 18+</p>
            <label class="switch">
            <input id="check18" type="checkbox" checked >
            <div>
                <span></span>
            </div>
        </label></div>
        <div id="minAge45">
            <p>Min Age 45+</p>
            <label class="switch">
            <input id="check45" type="checkbox" checked>
            <div>
                <span></span>
            </div>
        </label></div>

        <a href="mailto:anand.patil@kreevi.com">Built by <svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" viewBox="0 0 961.6 370"><defs><linearGradient x1="852.8" y1="171.2" x2="796.5" y2="227.4" gradientTransform="translate(923.82 356.97) rotate(180)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#353535"/><stop offset="0.83" stop-color="#066"/></linearGradient></defs><g data-name="Layer 1"><g isolation="isolate"><text transform="translate(275.21 271.81)" style="fill:#a7aa00;font-family:TimeBurner-Bold, TimeBurner;font-size:250.795654296875px;font-weight:700;isolation:isolate">  K</text><text transform="translate(424.44 271.81)" style="fill:#a7aa00;font-family:TimeBurner;font-size:250.795654296875px;isolation:isolate;letter-spacing:-0.06000044779359441em">  r</text><text transform="translate(497.17 271.81)" style="fill:#066;font-family:TimeBurner;font-size:250.795654296875px;isolation:isolate;letter-spacing:-0.014000364075661543em">  e</text><text transform="translate(645.89 271.81)" style="fill:#066;font-family:TimeBurner;font-size:250.795654296875px;isolation:isolate;letter-spacing:-0.05200051788302658em">  e</text><text transform="translate(786.09 271.81)" style="fill:#066;font-family:TimeBurner;font-size:250.795654296875px;isolation:isolate">  vi</text></g><path d="M186.8 0 47.5 120.4c-50.8 43.9-50.8 115.2 0 159.1h0L186.8 159.2C237.7 115.2 237.7 44 186.8 0" fill="#066"/><path d="M71.9 99.4l32.4-28h0c-17.9 15.5-17.9 40.5 0 56l59.7 51.6h0L71.9 258.5h0C21 214.6 21 143.3 71.9 99.4Z" fill="url(#linear-gradient)"/><path d="M33.2 132.5h0l28.2-24.4h0c-15.6 13.5-15.6 35.3 0 48.7l52 44.9L274.8 341.3h0c-44.3 38.3-116.1 38.3-160.3 0L33.2 271.1h0C-11.1 232.8-11.1 170.8 33.2 132.5Z" fill="#a7aa00"/></g></svg>
        </a>
    </header>
    <div class="wrapper">
        <div class="container initial-container">
            <lottie-player src="https://assets9.lottiefiles.com/packages/lf20_r71cen62.json" background="transparent" speed="0.75" loop autoplay></lottie-player>
            <ul>
                <li>The app searches for slots automatically, you don't need to refresh the page</li>
                <li>You won't see any slots displayed if they are not being added to the Cowin website</li>
                <li>All the data will be reset once you refresh or close the page</li>
            </ul>
            <audio class="audioPlayer">
                <source src="https://kreevi.github.io/cowin-pune/notification.wav" type="audio/wav">
              </audio>
        </div>
    </div>
    <footer>
        <p>Data being sourced from the <a href="https://apisetu.gov.in/public/api/cowins" target="_blank">Cowin API</a></p>
        <a href="#top" id="toTop"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);" preserveAspectRatio="xMidYMid meet" viewBox="0 0 8 8"><path d="M4 1L0 5l1.5 1.5L4 4l2.5 2.5L8 5L4 1z" fill="#626262"/></svg></a>
    </footer>
</body>
<style>
    html {
        font-size: 15px;
        font-weight: 300;
        line-height: 1.5;
        font-family: 'Montserrat', 'Lato', sans-serif;
        background: #fafafa;
        scroll-behavior: smooth;
    }
    
    body {
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        justify-content: space-between;
        align-items: center;
        scroll-behavior: smooth;
        background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
    }
        
    @keyframes gradient {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
    
    header {
        width: 100%;
        font-size: 13px;
        display: flex;
        justify-content: flex-end;
        align-items: center;
        gap: 10px;
        background: #fafafa;
    }
    
    footer a, footer {
        text-decoration: none;
        color: #fff;
    }
    
    header a {
        display: flex;
        align-items: center;
        gap: 10px;
        text-decoration: none;
        color: #111;
        padding: 10px;
    }
    
    header svg,
    header img {
        width: 75px;
    }
    
    .wrapper {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, min-content));
        gap: 20px;
        margin: 50px 20px;
        justify-content: center;
        align-items: center;
        width: 100%;
    }
    
    .container {
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.20);
        background: #fff;
        animation: border-anim 1s ease-in-out forwards;
        height: 100%;
        box-sizing: border-box;
    }
    
    .initial-container {
        height: auto;
    }
    
    #toTop {
        position: fixed;
        right: 10px;
        bottom: 50px;
        background-color: #fff;
        border: 2px solid #066;
        border-radius: 50%;
        padding: 12px;
        cursor: pointer;
        transition: all 0.3s ease-in-out;
        line-height: 1;
    }
    
    #toTop svg {
        width: 25px;
        height: 25px;
    }
    
    #toTop svg path {
        fill: #066;
    }
    
    #minAge18,
    #minAge45 {
        display: flex;
        justify-content: center;
        align-items: center;
        line-height: 1;
        gap: 10px;
    }
    
    .switch {
        --line: #E8EBFB;
        --dot: #a7aa00;
        --circle: #D3D4EC;
        --background: #fff;
        --duration: .3s;
        --text: #9EA0BE;
        --shadow: 0 1px 3px rgba(0, 9, 61, 0.08);
        cursor: pointer;
        position: relative;
    }
    
    .switch:before {
        content: "";
        width: 60px;
        height: 32px;
        border-radius: 16px;
        background: var(--background);
        position: absolute;
        left: 0;
        top: 0;
        box-shadow: var(--shadow);
    }
    
    .switch input {
        display: none;
    }
    
    .switch input+div {
        position: relative;
    }
    
    .switch input+div:before,
    .switch input+div:after {
        --s: 1;
        content: "";
        position: absolute;
        height: 4px;
        top: 14px;
        width: 24px;
        background: var(--line);
        transform: scaleX(var(--s));
        transition: transform var(--duration) ease;
    }
    
    .switch input+div:before {
        --s: 0;
        left: 4px;
        transform-origin: 0 50%;
        border-radius: 2px 0 0 2px;
    }
    
    .switch input+div:after {
        left: 32px;
        transform-origin: 100% 50%;
        border-radius: 0 2px 2px 0;
    }
    
    .switch input+div span {
        padding-left: 60px;
        line-height: 28px;
        color: var(--text);
    }
    
    .switch input+div span:before {
        --x: 0;
        --b: var(--circle);
        --s: 4px;
        content: "";
        position: absolute;
        left: 4px;
        top: 4px;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        box-shadow: inset 0 0 0 var(--s) var(--b);
        transform: translateX(var(--x));
        transition: box-shadow var(--duration) ease, transform var(--duration) ease;
    }
    
    .switch input+div span:not(:empty) {
        padding-left: 68px;
    }
    
    .switch input:checked+div:before {
        --s: 1;
    }
    
    .switch input:checked+div:after {
        --s: 0;
    }
    
    .switch input:checked+div span:before {
        --x: 28px;
        --s: 12px;
        --b: var(--dot);
    }
    
    @keyframes border-anim {
        from {
            box-shadow: 0 2px 2px 0 #066, 0 3px 1px -2px #066, 0 1px 5px 0 #066;
        }
        to {
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.20);
        }
    }
    
    .container ul {
        padding-inline-start: 15px;
        padding-inline-end: 15px;
    }
    
    p {
        margin: 0;
    }
    
    @media(max-width:700px) {
        body {
            grid-template-columns: 1fr;
        }
    }
</style>
<script>
    (function($) {

        $('#check18').on('change', function() {
            if ($(this).prop('checked')) {
                fetchdata18();

            }
        });
        $('#check45').on('change', function() {
            if ($(this).prop('checked')) {
                fetchdata45();

            }
        });

        
        setInterval(function() {
            if ($("#check18:checked").length == 1 && $("#check45:checked").length == 1) {
                fetchdata();
            } else if ($("#check45:checked").length == 1 && $("#check18:checked").length == 0) {
                fetchdata45();
            } else if ($("#check18:checked").length == 1 && $("#check45:checked").length == 0) {
                fetchdata18();
            } else {
                return;
            }
        }, 10000);

        var toTopButton = document.getElementById("toTop");
        toTopButton.style.display = "none";
        document.querySelector('body').onscroll = function() {
            if (window.scrollY > 150)
                toTopButton.style.display = "block";
            else
                toTopButton.style.display = "none";
        };

    })(jQuery);


    function fetchdata() {
        console.log("main ran");

        Date.prototype.yyyymmdd = function() {
            var yyyy = this.getFullYear().toString();
            var mm = (this.getMonth() + 1).toString(); // getMonth() is zero-based
            var dd = this.getDate().toString();
            return (dd[1] ? dd : "0" + dd[0]) + "-" + (mm[1] ? mm : "0" + mm[0]) + "-" + yyyy; // padding
        };

        var date = new Date();
        console.log(date.yyyymmdd())

        var district = 363;

        var fetchurl = 'https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=' + district + '&date=' + date.yyyymmdd();

        $.ajax({
            // url: 'https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=57&date=15-05-2021',
            url: fetchurl,
            method: "GET",
            type: "JSON",
            contentType: 'application/json; charset=utf-8',
            success: function(data) {
                // $("#data").html(JSON.stringify(data.sessions, null, 2));

                var sessions_arr = data.sessions;
                // console.log(sessions_arr);

                resdata = data.sessions;
                var htmlText = '';
                for (var key in resdata) {



                    if (resdata[key].available_capacity > 0) {
                        // console.log(resdata[key]);
                        // console.log("==============================");
                        htmlText += '<div class="container">';
                        htmlText += '<p>Name: ' + resdata[key].name + '</p>';
                        htmlText += '<p>Pincode: ' + resdata[key].pincode + '</p>';
                        htmlText += '<p>Address: ' + resdata[key].address + '</p>';
                        htmlText += '<p>Doses Available: ' + resdata[key].available_capacity + '</p>';
                        htmlText += '<p>Doses Available For Dose 1: ' + resdata[key].available_capacity_dose1 + '</p>';
                        htmlText += '<p>Doses Available For Dose 2: ' + resdata[key].available_capacity_dose2 + '</p>';
                        htmlText += '<p>Vaccine: ' + resdata[key].vaccine + '</p>';
                        htmlText += '<p id="minAge">Min Age: ' + resdata[key].min_age_limit + '</p>';
                        htmlText += '<p>Time Slot: ' + resdata[key].from + ' To ' + resdata[key].to + '</p>';
                        htmlText += '</div>';
                    }

                }
                $('.wrapper').prepend(htmlText);
                if (resdata[0] != undefined) {
                    // console.log(resdata[0]);
                    $(".audioPlayer")[0].play();
                }
                // }




            }
        });
    }

    function fetchdata18() {
        console.log("18 ran");


        Date.prototype.yyyymmdd = function() {
            var yyyy = this.getFullYear().toString();
            var mm = (this.getMonth() + 1).toString(); // getMonth() is zero-based
            var dd = this.getDate().toString();
            return (dd[1] ? dd : "0" + dd[0]) + "-" + (mm[1] ? mm : "0" + mm[0]) + "-" + yyyy; // padding
        };

        var date = new Date();
        console.log(date.yyyymmdd())
        var district = 363;

        var fetchurl = 'https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=' + district + '&date=' + date.yyyymmdd();
        $.ajax({
            url: fetchurl,
            method: "GET",
            type: "JSON",
            contentType: 'application/json; charset=utf-8',
            success: function(data) {
                // $("#data").html(JSON.stringify(data.sessions, null, 2));

                var sessions_arr = data.sessions;
                // console.log(sessions_arr);

                resdata = data.sessions;
                var htmlText = '';
                for (var key in resdata) {



                    if (resdata[key].available_capacity > 0 && resdata[key].min_age_limit == 18) {
                        // console.log(resdata[key]);
                        // console.log("==============================");
                        htmlText += '<div class="container">';
                        htmlText += '<p>Name: ' + resdata[key].name + '</p>';
                        htmlText += '<p>Pincode: ' + resdata[key].pincode + '</p>';
                        htmlText += '<p>Address: ' + resdata[key].address + '</p>';
                        htmlText += '<p>Doses Available: ' + resdata[key].available_capacity + '</p>';
                        htmlText += '<p>Doses Available For Dose 1: ' + resdata[key].available_capacity_dose1 + '</p>';
                        htmlText += '<p>Doses Available For Dose 2: ' + resdata[key].available_capacity_dose2 + '</p>';
                        htmlText += '<p>Vaccine: ' + resdata[key].vaccine + '</p>';
                        htmlText += '<p id="minAge">Min Age: ' + resdata[key].min_age_limit + '</p>';
                        htmlText += '<p>Time Slot: ' + resdata[key].from + ' To ' + resdata[key].to + '</p>';
                        htmlText += '</div>';
                    }

                }
                $('.wrapper').prepend(htmlText);
                if (resdata[0] != undefined) {
                    // console.log(resdata[0]);
                    $(".audioPlayer")[0].play();
                }
                // }




            }
        });
    }

    function fetchdata45() {
        console.log("45 ran");
        Date.prototype.yyyymmdd = function() {
            var yyyy = this.getFullYear().toString();
            var mm = (this.getMonth() + 1).toString(); // getMonth() is zero-based
            var dd = this.getDate().toString();
            return (dd[1] ? dd : "0" + dd[0]) + "-" + (mm[1] ? mm : "0" + mm[0]) + "-" + yyyy; // padding
        };

        var date = new Date();
        console.log(date.yyyymmdd())

        var district = 363;

        var fetchurl = 'https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=' + district + '&date=' + date.yyyymmdd();

        $.ajax({
            // url: 'https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id=57&date=15-05-2021',
            url: fetchurl,
            method: "GET",
            type: "JSON",
            contentType: 'application/json; charset=utf-8',
            success: function(data) {
                // $("#data").html(JSON.stringify(data.sessions, null, 2));

                var sessions_arr = data.sessions;
                // console.log(sessions_arr);

                resdata = data.sessions;
                var htmlText = '';
                for (var key in resdata) {



                    if (resdata[key].available_capacity > 0 && resdata[key].min_age_limit == 45) {
                        // console.log(resdata[key]);
                        // console.log("==============================");
                        htmlText += '<div class="container">';
                        htmlText += '<p>Name: ' + resdata[key].name + '</p>';
                        htmlText += '<p>Pincode: ' + resdata[key].pincode + '</p>';
                        htmlText += '<p>Address: ' + resdata[key].address + '</p>';
                        htmlText += '<p>Doses Available: ' + resdata[key].available_capacity + '</p>';
                        htmlText += '<p>Doses Available For Dose 1: ' + resdata[key].available_capacity_dose1 + '</p>';
                        htmlText += '<p>Doses Available For Dose 2: ' + resdata[key].available_capacity_dose2 + '</p>';
                        htmlText += '<p>Vaccine: ' + resdata[key].vaccine + '</p>';
                        htmlText += '<p id="minAge">Min Age: ' + resdata[key].min_age_limit + '</p>';
                        htmlText += '<p>Time Slot: ' + resdata[key].from + ' To ' + resdata[key].to + '</p>';
                        htmlText += '</div>';
                    }

                }
                $('.wrapper').prepend(htmlText);
                if (resdata[0] != undefined) {
                    // console.log(resdata[0]);
                    $(".audioPlayer")[0].play();
                }
                // }




            }
        });
    }
</script>
<script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

</html>
